---
import type { RankedAttraction } from '../lib/trips/details';

interface Props {
  items: RankedAttraction[];
}

const { items } = Astro.props;
---

<div class="consensus-bars" aria-label="Consensus rankings">
  {
    items.map((item, index) => (
      <article class="consensus-row">
        <div class="consensus-row__meta">
          <p class="consensus-row__label">
            {item.attractionLabel}
            {index < 3 && <span class="consensus-row__star">Top {index + 1}</span>}
          </p>
          <p class="consensus-row__sub">
            {item.parkLabel} / {item.areaLabel}
          </p>
        </div>

        <div class="consensus-row__track">
          <progress
            class:list={['consensus-progress', `consensus-progress--${item.tone}`]}
            max={item.maxScore}
            value={item.consensusScore}
          />
          <p class="consensus-row__votes">
            {item.mustDoVotes} must-do / {item.preferredVotes} preferred
          </p>
        </div>

        <p class="consensus-row__score">
          {item.consensusScore}
          <span>/{item.maxScore}</span>
        </p>
      </article>
    ))
  }
</div>
